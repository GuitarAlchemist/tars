DESCRIBE {
    name: "Output Generator Test"
    version: "1.0"
    description: "Test metascript to generate output structure"
}

CONFIG {
    model: "llama3"
    temperature: 0.7
    max_tokens: 1000
}

VARIABLE project_name {
    value: "test_project"
}

VARIABLE output_dir {
    value: "output/test_demo"
}

ACTION {
    type: "log"
    message: "Creating output structure for project: ${project_name}"
}

ACTION {
    type: "log"
    message: "Output directory: ${output_dir}"
}

FSHARP {
    open System.IO
    
    let projectName = "test_project"
    let outputDir = "output/test_demo"
    
    // Create directory structure
    Directory.CreateDirectory(outputDir) |> ignore
    Directory.CreateDirectory(Path.Combine(outputDir, "memory")) |> ignore
    Directory.CreateDirectory(Path.Combine(outputDir, "exploration")) |> ignore
    Directory.CreateDirectory(Path.Combine(outputDir, "recovery")) |> ignore
    
    // Create a simple README
    let readmeContent = sprintf "# %s\n\nGenerated by TARS F# CLI\nTimestamp: %s" projectName (System.DateTime.Now.ToString())
    File.WriteAllText(Path.Combine(outputDir, "README.md"), readmeContent)
    
    sprintf "Created output structure at: %s" outputDir
}

ACTION {
    type: "log"
    message: "Output generation completed: ${_last_result}"
}
